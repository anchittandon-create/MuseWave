# ğŸµ MuseForge Pro Backend - Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CLIENT (Frontend)                           â”‚
â”‚                    React + TypeScript + Vite                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ HTTP/REST
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FASTIFY SERVER (Port 4000)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                     API ROUTES                                â”‚  â”‚
â”‚  â”‚  â€¢ POST /api/generate          - Main generation pipeline    â”‚  â”‚
â”‚  â”‚  â€¢ POST /api/suggestions/all   - Get all AI suggestions      â”‚  â”‚
â”‚  â”‚  â€¢ POST /api/suggestions/field - Get field-specific suggest  â”‚  â”‚
â”‚  â”‚  â€¢ GET  /api/dashboard/stats   - Analytics                   â”‚  â”‚
â”‚  â”‚  â€¢ GET  /api/dashboard/generations - List generations        â”‚  â”‚
â”‚  â”‚  â€¢ GET  /assets/*               - Stream audio/video files   â”‚  â”‚
â”‚  â”‚  â€¢ GET  /health                 - Health check               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚          SERVICE LAYER                        â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AI SUGGESTION â”‚  â”‚  MUSIC PLANNER   â”‚  â”‚  PYTHON BRIDGE   â”‚
â”‚    ENGINE     â”‚  â”‚                  â”‚  â”‚                  â”‚
â”‚ â€¢ Cache (LRU) â”‚  â”‚ â€¢ BPM calc       â”‚  â”‚ â€¢ Riffusion     â”‚
â”‚ â€¢ Similarity  â”‚  â”‚ â€¢ Key/scale      â”‚  â”‚ â€¢ Magenta       â”‚
â”‚ â€¢ Ontology    â”‚  â”‚ â€¢ Structure      â”‚  â”‚ â€¢ Coqui TTS     â”‚
â”‚ â€¢ 6 suggest   â”‚  â”‚ â€¢ Timing         â”‚  â”‚ â€¢ FluidSynth    â”‚
â”‚   functions   â”‚  â”‚                  â”‚  â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚ execa
                                                   â–¼
                                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                         â”‚  PYTHON MODELS  â”‚
                                         â”‚  â€¢ riffusion.py â”‚
                                         â”‚  â€¢ magenta.py   â”‚
                                         â”‚  â€¢ coqui.py     â”‚
                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    FFMPEG     â”‚  â”‚   DSP FALLBACK   â”‚  â”‚    STORAGE       â”‚
â”‚  PROCESSOR    â”‚  â”‚                  â”‚  â”‚                  â”‚
â”‚ â€¢ Mix audio   â”‚  â”‚ â€¢ Additive synth â”‚  â”‚ â€¢ UUID paths     â”‚
â”‚ â€¢ Normalize   â”‚  â”‚ â€¢ Formant vocals â”‚  â”‚ â€¢ /YYYY/MM/UUID/ â”‚
â”‚ â€¢ 8 video     â”‚  â”‚ â€¢ WAV encoding   â”‚  â”‚ â€¢ saveBuffer     â”‚
â”‚   styles      â”‚  â”‚ â€¢ I-V-vi-IV      â”‚  â”‚ â€¢ getAssetUrl    â”‚
â”‚ â€¢ SRT subs    â”‚  â”‚   progression    â”‚  â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  SQLITE (sql.js)â”‚
                    â”‚  â€¢ generations  â”‚
                    â”‚  â€¢ 19 columns   â”‚
                    â”‚  â€¢ JSON arrays  â”‚
                    â”‚  â€¢ Analytics    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  FILE STORAGE   â”‚
                    â”‚ /public/assets/ â”‚
                    â”‚  â€¢ .wav         â”‚
                    â”‚  â€¢ .mp4         â”‚
                    â”‚  â€¢ .srt         â”‚
                    â”‚  â€¢ .mid         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Generation Pipeline Flow

```
1. CLIENT REQUEST
   â””â”€> POST /api/generate with:
       â€¢ musicPrompt: "Dark cinematic score"
       â€¢ genres: ["Cinematic", "Dark Ambient"]
       â€¢ durationSec: 60
       â€¢ lyrics: "Shadows fall..."
       â€¢ generateVideo: true

2. MUSIC PLANNER
   â””â”€> Calculate BPM (weighted avg from genres)
   â””â”€> Determine key (mood-based)
   â””â”€> Generate song structure (intro/verse/chorus/outro)
   â””â”€> Create timing markers

3. ASSET DIRECTORY
   â””â”€> Create /public/assets/2024/12/UUID-HERE/

4. AUDIO GENERATION (Parallel)
   â”œâ”€> Riffusion: Text â†’ Audio (30-120s)
   â”‚   â””â”€> Fallback: DSP additive synthesis
   â”œâ”€> Magenta: Generate MIDI melody
   â”‚   â””â”€> FluidSynth: MIDI â†’ WAV
   â”‚   â””â”€> Fallback: None (optional layer)
   â””â”€> Coqui TTS: Lyrics â†’ Vocals
       â””â”€> Fallback: DSP formant synthesis

5. MIXING
   â””â”€> FFmpeg: Mix all stems
   â””â”€> Normalize: loudnorm + dynaudnorm + alimiter
   â””â”€> Output: 44.1kHz stereo WAV

6. VIDEO GENERATION (If requested)
   â”œâ”€> For each video style:
   â”‚   â”œâ”€> FFmpeg: Apply filter (spectrum/waveform/etc.)
   â”‚   â”œâ”€> H.264 encode (1920x1080, 30fps)
   â”‚   â””â”€> AAC audio (192k)
   â””â”€> Lyric Video: Generate SRT + overlay

7. AI SUGGESTIONS
   â””â”€> Generate unique suggestions for next generation
   â””â”€> Cache results (LRU, size 5)
   â””â”€> Check similarity (threshold 0.7)

8. DATABASE
   â””â”€> Save generation record (19 columns)
   â””â”€> Update analytics

9. RESPONSE
   â””â”€> Return JSON with:
       â€¢ Generated asset URLs
       â€¢ AI suggestions
       â€¢ Engines used
       â€¢ Processing time
       â€¢ BPM/key/scale
```

---

## ğŸ§  AI Suggestion Engine Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AI SUGGESTION ENGINE                         â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              SUGGESTION CACHE (LRU)                    â”‚    â”‚
â”‚  â”‚  â€¢ Max size: 5                                         â”‚    â”‚
â”‚  â”‚  â€¢ Similarity checking (Jaccard distance)              â”‚    â”‚
â”‚  â”‚  â€¢ Uniqueness threshold: 0.7 (70% different)           â”‚    â”‚
â”‚  â”‚  â€¢ Recent history: ["prompt1", "prompt2", ...]         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              ONTOLOGY DATABASE                         â”‚    â”‚
â”‚  â”‚  â€¢ 40+ genres (BPM ranges, subgenres)                  â”‚    â”‚
â”‚  â”‚  â€¢ 70+ artists (genre mappings, influence)             â”‚    â”‚
â”‚  â”‚  â€¢ 6 lyric themes (50+ words each)                     â”‚    â”‚
â”‚  â”‚  â€¢ 15 languages (regional variants)                    â”‚    â”‚
â”‚  â”‚  â€¢ 8 video styles (context rules)                      â”‚    â”‚
â”‚  â”‚  â€¢ 5 prompt templates                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚           SUGGESTION FUNCTIONS                         â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚  1. suggestMusicPrompt()                               â”‚    â”‚
â”‚  â”‚     â””â”€> Template + genre tone + artist + atmosphere   â”‚    â”‚
â”‚  â”‚     â””â”€> Crossover genres (15% prob)                    â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚  2. suggestGenres()                                    â”‚    â”‚
â”‚  â”‚     â””â”€> 2-3 related subgenres                          â”‚    â”‚
â”‚  â”‚     â””â”€> Keyword matching from prompt                   â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚  3. suggestArtists()                                   â”‚    â”‚
â”‚  â”‚     â””â”€> Weighted by genre similarity                   â”‚    â”‚
â”‚  â”‚     â””â”€> 2-4 unique artists                             â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚  4. suggestLyrics()                                    â”‚    â”‚
â”‚  â”‚     â””â”€> Theme detection from prompt                    â”‚    â”‚
â”‚  â”‚     â””â”€> Structure based on duration                    â”‚    â”‚
â”‚  â”‚     â””â”€> Verse/chorus if >60s                           â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚  5. suggestVocalLanguages()                            â”‚    â”‚
â”‚  â”‚     â””â”€> English + genre preference                     â”‚    â”‚
â”‚  â”‚     â””â”€> Regional variant (15% prob)                    â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚  6. suggestVideoStyles()                               â”‚    â”‚
â”‚  â”‚     â””â”€> Primary: Lyric Video if lyrics present         â”‚    â”‚
â”‚  â”‚     â””â”€> Secondary: Genre-based                         â”‚    â”‚
â”‚  â”‚     â””â”€> Max 2 styles                                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚           UNIQUENESS ALGORITHM                         â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚  1. Generate candidate suggestion                      â”‚    â”‚
â”‚  â”‚  2. Extract keywords (tokenize, lowercase)             â”‚    â”‚
â”‚  â”‚  3. For each cached suggestion:                        â”‚    â”‚
â”‚  â”‚     a. Calculate Jaccard similarity:                   â”‚    â”‚
â”‚  â”‚        J(A,B) = |A âˆ© B| / |A âˆª B|                      â”‚    â”‚
â”‚  â”‚     b. If similarity > 0.7: REJECT                     â”‚    â”‚
â”‚  â”‚  4. If unique: ACCEPT and add to cache                 â”‚    â”‚
â”‚  â”‚  5. If max attempts (10): Return best candidate        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ›ï¸ DSP Fallback Architecture

### Instrumental Synthesis
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ADDITIVE SYNTHESIS ENGINE                  â”‚
â”‚                                                         â”‚
â”‚  1. Chord Progression: I-V-vi-IV                        â”‚
â”‚     â””â”€> Semitones: [0, 7, 9, 5]                         â”‚
â”‚                                                         â”‚
â”‚  2. Harmonics (4 components):                           â”‚
â”‚     â””â”€> Fundamental (0.4 amplitude)                     â”‚
â”‚     â””â”€> Octave (0.2 amplitude)                          â”‚
â”‚     â””â”€> Fifth (0.1 amplitude)                           â”‚
â”‚     â””â”€> 4th harmonic (0.05 amplitude)                   â”‚
â”‚                                                         â”‚
â”‚  3. Bass Layer:                                         â”‚
â”‚     â””â”€> Sub-octave (fundamental / 2)                    â”‚
â”‚     â””â”€> 0.3 amplitude                                   â”‚
â”‚                                                         â”‚
â”‚  4. ADSR Envelope:                                      â”‚
â”‚     â””â”€> Attack: 10% of duration                         â”‚
â”‚     â””â”€> Sustain: 70% of duration                        â”‚
â”‚     â””â”€> Release: 20% of duration                        â”‚
â”‚                                                         â”‚
â”‚  5. Output:                                             â”‚
â”‚     â””â”€> 44.1kHz stereo                                  â”‚
â”‚     â””â”€> 16-bit PCM WAV                                  â”‚
â”‚     â””â”€> 0.5 amplitude (mastering headroom)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Vocal Synthesis
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              FORMANT SYNTHESIS ENGINE                   â”‚
â”‚                                                         â”‚
â”‚  1. Vowel Formants (3 frequencies each):                â”‚
â”‚     â””â”€> a [730, 1090, 2440] Hz                          â”‚
â”‚     â””â”€> e [530, 1840, 2480] Hz                          â”‚
â”‚     â””â”€> i [270, 2290, 3010] Hz                          â”‚
â”‚     â””â”€> o [570, 840, 2410] Hz                           â”‚
â”‚     â””â”€> u [440, 1020, 2240] Hz                          â”‚
â”‚                                                         â”‚
â”‚  2. Character-based Selection:                          â”‚
â”‚     â””â”€> Map first char of word to vowel                 â”‚
â”‚     â””â”€> Synthesize 3 formant frequencies                â”‚
â”‚                                                         â”‚
â”‚  3. Vibrato:                                            â”‚
â”‚     â””â”€> 5 Hz modulation                                 â”‚
â”‚     â””â”€> Â±5% amplitude variation                         â”‚
â”‚                                                         â”‚
â”‚  4. Word Envelope:                                      â”‚
â”‚     â””â”€> Attack: 10% of word duration                    â”‚
â”‚     â””â”€> Sustain: 80% of word duration                   â”‚
â”‚     â””â”€> Release: 10% of word duration                   â”‚
â”‚                                                         â”‚
â”‚  5. Timing:                                             â”‚
â”‚     â””â”€> Even distribution across duration               â”‚
â”‚     â””â”€> Timestamp array for each word                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Request â”‚â”€â”€â”€â”€>â”‚  Route   â”‚â”€â”€â”€â”€>â”‚ Service  â”‚â”€â”€â”€â”€>â”‚  Model   â”‚
â”‚  (JSON) â”‚     â”‚ Handler  â”‚     â”‚  Layer   â”‚     â”‚ (Python) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                         â”‚
                                                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Response â”‚<â”€â”€â”€â”€â”‚ Response â”‚<â”€â”€â”€â”€â”‚  Mix &   â”‚<â”€â”€â”€â”€â”‚  Audio   â”‚
â”‚ (URLs)  â”‚     â”‚ Builder  â”‚     â”‚  Video   â”‚     â”‚  Files   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚                                  â”‚
                      â–¼                                  â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Database â”‚                        â”‚ Storage  â”‚
              â”‚  (Save)  â”‚                        â”‚  (Files) â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

This architecture provides:

âœ… **Separation of Concerns** - Each layer has a single responsibility
âœ… **Graceful Degradation** - Fallbacks at every level
âœ… **Scalability** - Services can be distributed
âœ… **Testability** - Each component is independently testable
âœ… **Maintainability** - Clear boundaries and interfaces
âœ… **Performance** - Parallel processing where possible
âœ… **Reliability** - Comprehensive error handling
